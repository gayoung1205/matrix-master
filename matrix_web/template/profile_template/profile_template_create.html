{% load static %}
{% load filter_tags %}

<div
        class="modal fade"
        id="profile-create"
        tabindex="-1"
        role="dialog"
        aria-labelledby="create-modal-title"
        aria-hidden="true"
>
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title" id="create-modal-title">즐겨찾기 추가</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <form method="post" action="{% url 'profile' %}" id="profile-create-form">
                {% csrf_token %}
                {% load filter_tags %}
                <input type="hidden" id="mat-id-list" name="mat_id_list" />
                <input type="hidden" id="input-1"   name="input_a" />
                <input type="hidden" id="input-2"   name="input_b" />
                <input type="hidden" id="input-3"   name="input_c" />
                <input type="hidden" id="input-4"   name="input_d" />
                <input type="hidden" id="input-5"   name="input_e" />
                <input type="hidden" id="input-6"   name="input_f" />
                <input type="hidden" id="input-7"   name="input_g" />
                <input type="hidden" id="input-8"   name="input_h" />
                <input type="hidden" id="input-9"   name="input_i" />
                <input type="hidden" id="input-10"  name="input_j" />
                <input type="hidden" id="input-11"  name="input_k" />
                <input type="hidden" id="input-12"  name="input_l" />
                <input type="hidden" id="input-13"  name="input_m" />
                <input type="hidden" id="input-14"  name="input_n" />
                <input type="hidden" id="input-15"  name="input_o" />
                <input type="hidden" id="input-16"  name="input_p" />
                <input type="hidden" id="input-kvm" name="input_kvm" />

                <div class="modal-body">
                    <div class="form-group">
                        <label for="input-name-create">즐겨찾기명</label>
                        <input hidden="hidden" />
                        <input
                                type="text"
                                class="form-control"
                                id="input-name-create"
                                name="name"
                                placeholder="Enter name"
                                value="{{ form.name.value|default_if_none:'' }}"
                                required
                        />
                        <div id="name-feedback" class="invalid-feedback">이름을 입력해주세요.</div>
                    </div>

                    {# ---------------------- 메인 매트릭스 ---------------------- #}
                    {% if main_mat %}
                        {% for mat in main_mat %}
                            <h5>{{ mat.name }}</h5>
                            <input type="hidden" class="system-id" value="{{ mat.id }}" />

                            <div class="form-row">
                                {% for i in 1|range_tag:5 %}
                                    <div class="form-group col-md-3">
                                        <label for="input-state-{{mat.id}}-{{i}}">{{ mat|monitor_name:i }}</label>
                                        <select id="input-state-{{mat.id}}-{{i}}" class="form-control select-{{i}}">
                                            {% for j in 0|range_tag:17 %}
                                                {% if j == 0 %}
                                                    <option selected value="00">-</option>
                                                {% else %}
                                                    <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}">{{ mat|device_name:j }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="form-row">
                                {% for i in 5|range_tag:9 %}
                                    <div class="form-group col-md-3">
                                        <label for="input-state-{{mat.id}}-{{i}}">{{ mat|monitor_name:i }}</label>
                                        <select id="input-state-{{mat.id}}-{{i}}" class="form-control select-{{i}}">
                                            {% for j in 0|range_tag:17 %}
                                                {% if j == 0 %}
                                                    <option selected value="00">-</option>
                                                {% else %}
                                                    <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}">{{ mat|device_monitor_label:j }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="form-row">
                                {% for i in 9|range_tag:13 %}
                                    <div class="form-group col-md-3">
                                        <label for="input-state-{{mat.id}}-{{i}}">{{ mat|monitor_name:i }}</label>
                                        <select id="input-state-{{mat.id}}-{{i}}" class="form-control select-{{i}}">
                                            {% for j in 0|range_tag:17 %}
                                                {% if j == 0 %}
                                                    <option selected value="00">-</option>
                                                {% else %}
                                                    <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}">{{ mat|device_monitor_label:j }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="form-row">
                                {% for i in 13|range_tag:17 %}
                                    <div class="form-group col-md-3">
                                        <label for="input-state-{{mat.id}}-{{i}}">{{ mat|monitor_name:i }}</label>
                                        <select id="input-state-{{mat.id}}-{{i}}" class="form-control select-{{i}}">
                                            {% for j in 0|range_tag:17 %}
                                                {% if j == 0 %}
                                                    <option selected value="00">-</option>
                                                {% else %}
                                                    <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}">{{ mat|device_monitor_label:j }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-3">
                                    <label for="main-input-kvm">USB</label>
                                    <select id="main-input-kvm" class="form-control input-kvm">
                                        {% for j in 0|range_tag:22 %}
                                            <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}" {% if j == 0 %}selected{% endif %}>
                                                {{ connect_list|kvm_index:j }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        {% endfor %}
                    {% endif %}

                    {# ---------------------- 서브 매트릭스 ---------------------- #}
                    {% if sub_mat %}
                        {% for mat in sub_mat %}
                            <h5>{{ mat.name }}</h5>
                            <input type="hidden" class="system-id" value="{{ mat.id }}" />

                            <div class="form-row">
                                {% for i in 1|range_tag:5 %}
                                    <div class="form-group col-md-3">
                                        <label for="input-state-{{mat.id}}-{{i}}">{{ mat|profile_monitor_name:i }}</label>
                                        <select id="input-state-{{mat.id}}-{{i}}" class="form-control select-{{i}}">
                                            {% for j in 0|range_tag:17 %}
                                                {% if j == 0 %}
                                                    <option selected value="00">-</option>
                                                {% else %}
                                                    <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}">{{ mat|device_name:j }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="form-row">
                                {% for i in 5|range_tag:9 %}
                                    <div class="form-group col-md-3">
                                        <label for="input-state-{{mat.id}}-{{i}}">{{ mat|profile_monitor_name:i }}</label>
                                        <select id="input-state-{{mat.id}}-{{i}}" class="form-control select-{{i}}">
                                            {% for j in 0|range_tag:17 %}
                                                {% if j == 0 %}
                                                    <option selected value="00">-</option>
                                                {% else %}
                                                    <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}">{{ mat|device_name:j }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="form-row">
                                {% for i in 9|range_tag:13 %}
                                    <div class="form-group col-md-3">
                                        <label for="input-state-{{mat.id}}-{{i}}">{{ mat|profile_monitor_name:i }}</label>
                                        <select id="input-state-{{mat.id}}-{{i}}" class="form-control select-{{i}}">
                                            {% for j in 0|range_tag:17 %}
                                                {% if j == 0 %}
                                                    <option selected value="00">-</option>
                                                {% else %}
                                                    <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}">{{ mat|device_name:j }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="form-row">
                                {% for i in 13|range_tag:17 %}
                                    <div class="form-group col-md-3">
                                        <label for="input-state-{{mat.id}}-{{i}}">{{ mat|profile_monitor_name:i }}</label>
                                        <select id="input-state-{{mat.id}}-{{i}}" class="form-control select-{{i}}">
                                            {% for j in 0|range_tag:17 %}
                                                {% if j == 0 %}
                                                    <option selected value="00">-</option>
                                                {% else %}
                                                    <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}">{{ mat|device_name:j }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-3">
                                    <label for="sub-input-kvm-{{mat.main_connect}}">USB</label>
                                    <select id="sub-input-kvm-{{mat.main_connect}}" class="form-control input-kvm">
                                        {% for j in 0|range_tag:17 %}
                                            <option value="{% if j < 10 %}0{{j}}{% else %}{{j}}{% endif %}" {% if j == 0 %}selected{% endif %}>
                                                {% if j == 0 %}-{% else %}{{ mat|device_name:j }}{% endif %}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        {% endfor %}
                    {% endif %}

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-modal-secondary" data-bs-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-modal-primary" onClick="profileCreate()">생성</button>
                </div>
            </form>

        </div>
    </div>
</div>
<style>
    select.form-control {
        padding-right: 2rem !important;
        background-position: right 0.75rem center !important;
        text-align: center !important;
        text-align-last: center !important;
    }

    select.form-control-sm {
        padding-right: 1.75rem !important;
        background-position: right 0.5rem center !important;
    }

    .form-group.col-md-3 {
        flex: 0 0 25%;
        max-width: 25%;
    }

    .form-control {
        width: 100% !important;
        min-width: 120px !important;
        font-size: 14px !important;
        padding: 0.5rem 0.75rem !important;
    }

    #profile-create select.form-control option {
        padding: 5px !important;
        text-align: center !important;
        text-align-last: center !important;
    }
</style>
